import React, { useState, useEffect } from 'react';
import { useDispatch } from 'react-redux';
import { useHistory } from 'react-router-dom';
import style from './header.module.css';
import ExitModal from '../ExitModal/ExitModal';
import authOperations from '../../redux/auth/authOperations';
// import Team from '../Team/Team';

function Header({ handleLogOut, name, total }) {
  const [isExit, setisExit] = useState(false);
  // const [isShowTeam, setisShowTeam] = useState(false)

  const dispatch = useDispatch();
  const history = useHistory();

  useEffect(() => {
    const handleEsc = event => {
      if (event.keyCode === 27) {
        setisExit(false);
      }
    };
    window.addEventListener('keydown', handleEsc);

    return () => {
      window.removeEventListener('keydown', handleEsc);
    };
  }, []);

  const showModalToExit = () => {
    setisExit(true);
  };

  const closeModal = () => {
    setisExit(false);
  };

  const signOut = () => {
    dispatch(authOperations.signOut());
    history.replace('/login');
  };

  // const showTeam = () => {
  //   history.push('/team')

  // }
  return (
    <>
      <header>
        <div className={style.headerContainer}>
          {/* <img className='wtf' src="../../assets/images/header/bc19logo.png" width="50" height="50" alt="bc19"/> */}
          <a href="/team" className={style.wtf}>
            {' '}
          </a>
          <ul className={style.userName}>
            <li className={style.userNameNick}>{name}</li>
            <li className={style.userNameLevel}>Новичок</li>
          </ul>
          <ul className={style.sloganWrapper}>
            <li>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.81645 12.22C4.16643 12.6094 3.7627 13.3224 3.7627 14.0811C3.7627 14.4725 3.86929 14.8573 4.07104 15.194L4.8869 16.5554C4.94591 18.5346 5.7509 20.3864 7.16352 21.7828C8.6099 23.2125 10.5267 24 12.5608 24C14.612 24 16.5399 23.2013 17.9894 21.7513C19.4395 20.3017 20.2382 18.3737 20.2382 16.3226V13.8132C20.2382 12.9522 19.7131 12.1805 18.945 11.8464V2.16769C18.9449 0.972422 17.9726 0 16.7773 0C16.1983 0 15.654 0.225516 15.2445 0.634922C14.8351 1.04437 14.6097 1.58869 14.6097 2.16764V11.3362L9.53221 2.86308C8.91782 1.8382 7.5838 1.50398 6.55846 2.11828C5.90845 2.50762 5.50466 3.22069 5.50466 3.97922C5.50466 4.37025 5.61126 4.75486 5.81301 5.09156L8.30765 9.25467C7.90401 9.24047 7.49249 9.33755 7.12241 9.55922C6.47287 9.9487 6.06932 10.6617 6.06932 11.4201C6.06932 11.5893 6.09051 11.7571 6.12951 11.9206C5.67332 11.8777 5.21676 11.9801 4.81645 12.22ZM19.2437 16.3227C19.2437 18.1081 18.5486 19.7863 17.2862 21.0481C16.0244 22.3104 14.3463 23.0055 12.5609 23.0055C9.70171 23.0055 7.23909 21.1786 6.29212 18.6314C6.67884 18.9391 7.15855 19.1047 7.64666 19.1047C8.02555 19.1047 8.40932 19.0054 8.75723 18.7969C9.25396 18.4993 9.6051 18.0261 9.74587 17.4645C9.83207 17.1204 9.83268 16.7685 9.75215 16.4334C9.81899 16.4396 9.88607 16.4438 9.95338 16.4438C10.3323 16.4438 10.716 16.3446 11.0641 16.1361C11.408 15.93 11.6736 15.6426 11.8523 15.313C11.8705 15.3326 11.889 15.352 11.908 15.371C12.3174 15.7804 12.8617 16.0058 13.4407 16.0058H14.4971C14.7717 16.0058 14.9943 15.7832 14.9943 15.5086C14.9943 15.234 14.7717 15.0113 14.4971 15.0113H13.4407C13.1274 15.0113 12.8328 14.8893 12.6112 14.6677C12.4344 14.4909 12.3206 14.2678 12.2819 14.0218C12.2724 13.9616 12.2676 13.8998 12.2676 13.8381C12.2676 13.1912 12.7938 12.665 13.4407 12.665H14.5274C14.5278 12.665 14.5281 12.665 14.5285 12.665C14.5289 12.665 14.5293 12.665 14.5296 12.665H18.0952C18.1787 12.665 18.2613 12.6738 18.3413 12.6913C18.8641 12.8052 19.2436 13.277 19.2436 13.8134V16.3227H19.2437ZM15.9478 1.33814C16.1694 1.11652 16.464 0.9945 16.7773 0.9945C17.4242 0.9945 17.9504 1.52081 17.9504 2.16764V11.6703H15.6041V2.16769C15.6041 1.85433 15.7262 1.55972 15.9478 1.33814ZM6.49921 3.97927C6.49921 3.56208 6.71245 3.18534 7.06954 2.97145C7.62454 2.63888 8.3467 2.81967 8.67918 3.37439L13.6505 11.6704H13.4407C12.6401 11.6704 11.9399 12.1071 11.5646 12.7545L10.0964 10.3042C10.0949 10.3017 10.095 10.3018 10.0934 10.2992C10.09 10.2936 10.0864 10.288 10.0828 10.2824L6.66618 4.58048C6.55691 4.39819 6.49921 4.19034 6.49921 3.97927ZM7.63373 10.4124C7.82137 10.3 8.02874 10.2465 8.23382 10.2465C8.62968 10.2465 9.01701 10.4459 9.23718 10.8057C9.24013 10.8105 9.24313 10.8153 9.24627 10.82L10.9559 13.6733C10.9573 13.6756 10.9588 13.678 10.9602 13.6804C11.2866 14.2347 11.1049 14.9522 10.553 15.2828C9.99787 15.6155 9.2758 15.4344 8.94341 14.8795L7.23093 12.0214C7.12171 11.8391 7.06405 11.6313 7.06405 11.4202C7.06396 11.0031 7.27705 10.6262 7.63373 10.4124ZM6.21543 12.9415C6.51937 13.0177 6.77549 13.2077 6.9366 13.4767L8.64965 16.3348C8.81071 16.6034 8.85745 16.9187 8.78127 17.2226C8.7051 17.5266 8.51502 17.7827 8.2461 17.9438C7.69143 18.2763 6.96955 18.0954 6.63712 17.5408L5.81816 16.1745C5.81484 16.1685 5.81104 16.1626 5.80748 16.1567L5.80734 16.1565L4.92421 14.6828C4.81499 14.5006 4.75729 14.2925 4.75729 14.0811C4.75729 13.6639 4.97052 13.2871 5.32776 13.0732C5.59621 12.9121 5.91154 12.8654 6.21543 12.9415Z"
                  fill="#C9CED6"
                />
                <path
                  d="M16.3637 15.0112H16.216C15.9414 15.0112 15.7188 15.2338 15.7188 15.5084C15.7188 15.7831 15.9414 16.0057 16.216 16.0057H16.3637C16.6383 16.0057 16.8609 15.7831 16.8609 15.5084C16.8609 15.2338 16.6382 15.0112 16.3637 15.0112Z"
                  fill="#C9CED6"
                />
              </svg>
            </li>
            <li>
              <h2 className={style.slogan}>Будь лучшей версией себя</h2>
            </li>
          </ul>
          <ul className={style.balls}>
            <li className={style.ballsNumbers}>{total}</li>
            <li className={style.ballsText}>Баллы</li>
          </ul>
          <ul className={style.buttonWrapper}>
            <li>
              <button className={style.buttonNotification}></button>
            </li>
            <li>
              <button
                // onClick={signOut}
                onClick={showModalToExit}
                // isExit={isExit}
                className={style.buttonLogout}
              ></button>
            </li>
          </ul>
        </div>
      </header>
      {isExit && <ExitModal closeModal={closeModal} signOut={signOut} />}
    </>
  );
}
export default Header;
